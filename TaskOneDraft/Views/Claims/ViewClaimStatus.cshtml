@model IEnumerable<TaskOneDraft.Models.Claims>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    .table {
        margin-top: 20px;
        margin-bottom:100px;    }

        .table thead th {
            background-color: #00ffcc; /* Header background color */
            color: black; /* Header text color */
        }

    .claim-row {
        background-color: #e0f7fa; /* Light background for claim rows */
    }

    .btn-primary {
        background-color: #00ced1; /* Turquoise */
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

        .btn-primary:hover {
            background-color: #008b8b; /* Darker turquoise on hover */
            color: black;
        }

    h2 {
        color: #1a1a1a; /* Heading color */
        text-shadow: 0 0 5px #00ffcc; /* Glowing effect for heading */
        margin-bottom: 20px; /* Space below heading */
        font-size: 30px; /* Larger heading font size */
    }

    .search-container {
        margin-bottom: 20px;
    }

    .search-input {
        border: 2px solid #00ced1;
        border-radius: 4px;
        padding: 5px 10px;
        margin-right: 10px;
    }

    .btn-reset {
        background-color: #ff6347; /* Tomato color */
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

        .btn-reset:hover {
            background-color: #d9534f; /* Darker red */
            color: white;
        }
</style>

<h2>View Claim Status</h2>

<div class="search-container">
    <label for="startDate">Start Date:</label>
    <input type="date" id="startDate" class="search-input">

    <label for="endDate">End Date:</label>
    <input type="date" id="endDate" class="search-input">

    <button id="resetButton" class="btn-reset">Reset</button>
</div>

@if (Model.Any())
{
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Claim ID</th>
                    <th>Claim Period Start</th>
                    <th>Claim Period End</th>
                    <th>Total Amount</th>
                    <th>Status</th>
                    <th>Date Submitted</th>
                </tr>
            </thead>
            <tbody id="claimsTableBody">
                @foreach (var claim in Model)
                {
                    <tr class="claim-row">
                        <td>@claim.ID</td>
                        <td>@claim.ClaimsPeriodStart.ToString("yyyy-MM-dd")</td>
                        <td>@claim.ClaimsPeriodEnd.ToString("yyyy-MM-dd")</td>
                        <td>@claim.TotalAmount.ToString("C", new System.Globalization.CultureInfo("en-ZA"))</td>
                        <td>@claim.ClaimStatus</td> <!-- Assuming Status is a property in your Claims model -->
                        <td>@claim.ClaimsPeriodStart.ToString("yyyy-MM-dd")</td> <!-- Assuming Date Submitted is tracked as the Claim Period Start -->
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <p class="alert alert-warning">No claims found.</p>
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        // Filter table rows based on date range input
        $('#startDate, #endDate').on('change', function () {
            var startDate = new Date($('#startDate').val());
            var endDate = new Date($('#endDate').val());

            // Only filter if both dates are selected
            if (!isNaN(startDate.getTime()) && !isNaN(endDate.getTime())) {
                $('#claimsTableBody tr').filter(function () {
                    var claimDate = new Date($(this).find('td:eq(1)').text()); // Get the Claim Period Start date from the table
                    $(this).toggle(claimDate >= startDate && claimDate <= endDate);
                });
            }
        });

        // Reset button functionality
        $('#resetButton').click(function () {
            // Clear the date inputs
            $('#startDate').val('');
            $('#endDate').val('');

            // Show all table rows
            $('#claimsTableBody tr').show();
        });
    });
</script>
